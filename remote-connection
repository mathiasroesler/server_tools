#!/bin/bash

#########################################################
### Bash script to connect to a remote server.        	#
### Last modified: 02/2021			      	#
### Author: Mathias Roesler		      	      	#
### Contact: mathias.roesler@univ-reims.fr    	      	#
#########################################################


# Get necessary functions
source server_functions
define_const


function print_usage() {
	# Prints function usage.
	#
	# Arguments:
	# Return:
	#
	printf "Usage: $NAME [-hl] [-p port] [-o options] server \n" 
	printf "Connects to a remote server using ssh.\n\n"
	print_options

return 0
}


PORT=false
OPTION=false

# Parse options
while getopts ":hlp:o:" opt; do
	case $opt in
		h) 
			print_usage
			exit 0
			;;
		l)
			available_servers
			exit 0
			;;
		p)
			port_number=${OPTARG}
			PORT=true
		       	;;
		o)
			options=${OPTARG}
			OPTION=true
			;;
		?)
			error_handler "invalid option."
			;;
	esac
done

# Shift to first argument after options.
shift $(($OPTIND - 1))

argument_nb_check $# 1

set_connection_params $1

print_info
ssh -p $port_number $options $server 
